name: Create EKS Cluster with Kind and CAPI

on: workflow_dispatch

jobs:
  create-cluster:
    runs-on: ubuntu-latest
    steps:
      - name: Create k8s Kind Cluster
        uses: helm/kind-action@v1.4.0
      - name: Kubectl describe nodes
        run: kubectl describe nodes
      - name: Download CAPI for AMD64
        run: curl -L https://github.com/kubernetes-sigs/cluster-api/releases/download/v1.3.2/clusterctl-linux-amd64 -o clusterctl
      - name: Install clusterctl
        run: sudo install -o root -g root -m 0755 clusterctl /usr/local/bin/clusterctl
      - name: clustectl version
        run: clusterctl version
